# uplook

Solar elevation and moon phase utilities

## Overview

**uplook** is a Python command-line utility that calculates and visualizes solar elevation and lunar phases for a given location and date. It outputs detailed charts that display the sun's elevation throughout the day and generates lunar phase images.

## Set up

uplook requires the `pyephem` library:

```
pip install pyephem
```

## Usage

To use uplook, invoke `uplook.py` from the command line with the appropriate arguments.  It has two commands:

- `lunar`
- `solar`

### Lunar command

`lunar` calculates the phase of the moon for the given date, outputting it in the requested format

- `--date`: Date for calculation in `YYYY-MM-DD` format (defaults to today)
- `--type`: One of 'image', 'summary' or 'combined' (defaults to 'summary')
  - 'image' renders an ASCII view of the moon
  - 'summary' writes a brief description of phase and fraction illuminated
  - 'combined' outputs 'summary' followed by 'image'
- `--char`: The character to use in the image output (defaults to '#')

Example commands and output:
```
uplook.py lunar --type combined --date 2025/11/1
```
```
Lunar profile for 2025/11/4: Waning Gibbous (96% illuminated)
     ### 
    #####
     ####
    #####
     ### 
```


### Solar command

`solar` calculates the solar procession across the given day, at the provided location

- `--date`: Date for calculation in `YYYY-MM-DD` format (defaults to today)
- `--lon`: Longitude of the location to use (e.g. -0.12)
- `--lat`: Latitude of the location to use (e.g. 51.51)
- `--type`: One of 'chart', 'table' or 'summary' (defaults to 'summary')
  - 'chart' outputs a brief summary, then renders an ASCII graph showing solar progression
  - 'table' outputs a brief summary, then renders an ASCII table showing solar progression
  - 'summary' just outputs a brief summary
- `--rows`: Number of rows to use in the chart (defaults to 5, restricted to range of 2-30)
- `--data-char`: The character to use in the chart series (defaults to '.')
- `--current-char`: The character to use in the chart series for the value closest to current time (defaults to 'O')

Example commands and output:
```
uplook.py solar --lat 51.51 --lon -0.12 --type chart --date 2025/11/1
```
```
Solar profile for 2025/11/1 at latitude 51.51, longitude -0.12
Sunrise: 06:53, Zenith: 11:44, Sunset: 16:33
30° |                                                
    |                     . . O .                    
    |                   .         .                  
    |                 .             .                
0°  |               .                 .              
    ------------------------------------------------
```
```
uplook.py solar --lat 51.51 --lon -0.12 --type table --date 2025/11/1
```
```
Solar profile for 2025/11/1 at latitude 51.51, longitude -0.12
Sunrise: 06:53, Zenith: 11:44, Sunset: 16:33
Time (UTC) Angle (Deg)
---------------------
00:00          -52.79
01:00          -49.93
02:00          -44.05
03:00          -36.24
04:00          -27.40
05:00          -18.13
06:00           -8.88
07:00            0.45
08:00            8.16
09:00           14.99
10:00           20.18
11:00           23.25
12:00           23.83
13:00           21.88
14:00           17.61
15:00           11.46
16:00            3.98
17:00           -3.73
18:00          -13.90
19:00          -23.23
20:00          -32.36
21:00          -40.77
22:00          -47.73
23:00          -52.19
---------------------
```

## Disclaimer

This project was a foray into vibe coding.  I estimate maybe 60% of the code was generated by Gemini, the bulk of which was the pyephem integration.  I was genuinely impressed by its understanding of what I was trying to accomplish, and the extent to which it achieved the requirements I set.  The only exception was the lunar phase calculation, which took a few iterations to get right.

This code is provided as-is, there are currently no tests, little verification beyond a technical process of "looking out the window and seeing if what was on screen matched the sky", and next to no bounds or range checking, input verification or sanity checking.  You have been warned.

## Requirements

- Python 3
- `pyephem` library

## License

GNU GENERAL PUBLIC LICENSE Version 3
